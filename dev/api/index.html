<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · MCMCTempering</title><meta name="title" content="API · MCMCTempering"/><meta property="og:title" content="API · MCMCTempering"/><meta property="twitter:title" content="API · MCMCTempering"/><meta name="description" content="Documentation for MCMCTempering."/><meta property="og:description" content="Documentation for MCMCTempering."/><meta property="twitter:description" content="Documentation for MCMCTempering."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MCMCTempering</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting-started/">Getting started: a simple Mixture of Gaussians example</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Temper-samplers"><span>Temper samplers</span></a></li><li><a class="tocitem" href="#Swapping"><span>Swapping</span></a></li><li><a class="tocitem" href="#Other-samplers"><span>Other samplers</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TuringLang/MCMCTempering.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/TuringLang/MCMCTempering.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Temper-samplers"><a class="docs-heading-anchor" href="#Temper-samplers">Temper samplers</a><a id="Temper-samplers-1"></a><a class="docs-heading-anchor-permalink" href="#Temper-samplers" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.tempered" href="#MCMCTempering.tempered"><code>MCMCTempering.tempered</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">tempered(sampler, inverse_temperatures; kwargs...)
OR
tempered(sampler, num_temps; swap_strategy=ReversibleSwap(), kwargs...)</code></pre><p>Return a tempered version of <code>sampler</code> using the provided <code>inverse_temperatures</code> or inverse temperatures generated from <code>num_temps</code> and the <code>swap_strategy</code>.</p><p><strong>Arguments</strong></p><ul><li><code>sampler</code> is an algorithm or sampler object to be used for underlying sampling and to apply tempering to</li><li>The temperature schedule can be defined either explicitly or just as an integer number of temperatures, i.e. as:<ul><li><code>inverse_temperatures</code> containing a sequence of &#39;inverse temperatures&#39; {β₀, ..., βₙ} where 0 ≤ βₙ &lt; ... &lt; β₁ &lt; β₀ = 1     OR</li><li><code>num_temps</code>, specifying the integer number of inverse temperatures to include in a generated <code>inverse_temperatures</code></li></ul></li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>swap_strategy::AbstractSwapStrategy</code> specifies the method for swapping inverse temperatures between chains</li><li><code>steps_per_swap::Integer</code> steps are carried out between each attempt at a swap</li></ul><p><strong>See also</strong></p><ul><li><a href="#MCMCTempering.TemperedSampler"><code>TemperedSampler</code></a></li><li>For more on the swap strategies:<ul><li><a href="#MCMCTempering.AbstractSwapStrategy"><code>AbstractSwapStrategy</code></a></li><li><a href="#MCMCTempering.ReversibleSwap"><code>ReversibleSwap</code></a></li><li><a href="#MCMCTempering.NonReversibleSwap"><code>NonReversibleSwap</code></a></li><li><a href="#MCMCTempering.SingleSwap"><code>SingleSwap</code></a></li><li><a href="#MCMCTempering.SingleRandomSwap"><code>SingleRandomSwap</code></a></li><li><a href="#MCMCTempering.RandomSwap"><code>RandomSwap</code></a></li><li><a href="#MCMCTempering.NoSwap"><code>NoSwap</code></a></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/MCMCTempering.jl#L46-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.TemperedSampler" href="#MCMCTempering.TemperedSampler"><code>MCMCTempering.TemperedSampler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TemperedSampler &lt;: AbstractMCMC.AbstractSampler</code></pre><p>A <code>TemperedSampler</code> struct wraps a sampler upon which to apply the Parallel Tempering algorithm.</p><p><strong>Fields</strong></p><ul><li><p><code>sampler</code>: sampler(s) used to target the tempered distributions</p></li><li><p><code>chain_to_beta</code>: collection of inverse temperatures β; β[i] correponds i-th tempered model</p></li><li><p><code>swapstrategy</code>: strategy to use for swapping</p></li><li><p><code>adapt</code>: boolean flag specifying whether or not to adapt</p></li><li><p><code>adaptation_states</code>: adaptation parameters</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/tempered_sampler.jl#L33-L41">source</a></section></article><p>Under the hood, <a href="#MCMCTempering.TemperedSampler"><code>MCMCTempering.TemperedSampler</code></a> is actually just a &quot;fancy&quot; representation of a composition (represented using a <a href="#MCMCTempering.CompositionSampler"><code>MCMCTempering.CompositionSampler</code></a>) of a <a href="#MCMCTempering.MultiSampler"><code>MCMCTempering.MultiSampler</code></a> and a <a href="#MCMCTempering.SwapSampler"><code>MCMCTempering.SwapSampler</code></a>.</p><p>Roughly speaking, the implementation of <code>AbstractMCMC.step</code> for <a href="#MCMCTempering.TemperedSampler"><code>MCMCTempering.TemperedSampler</code></a> is basically</p><pre><code class="language-julia hljs"># 1. Construct the tempered models.
multimodel = MultiModel([make_tempered_model(model, β) for β in tempered_sampler.chain_to_beta])
# 2. Construct the samplers (can be the same one repeated multiple times or different ones)
multisampler = MultiSampler([getsampler(tempered_sampler, i) for i = 1:numtemps])
# 3. Step targeting `multimodel` using a compositoin of `multisampler` and `swapsampler`.
AbstractMCMC.step(rng, multimodel, multisampler ∘ swapsampler, state; kwargs...)</code></pre><p>which in this case is provided by repeated calls to <a href="#MCMCTempering.make_tempered_model"><code>MCMCTempering.make_tempered_model</code></a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.make_tempered_model" href="#MCMCTempering.make_tempered_model"><code>MCMCTempering.make_tempered_model</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_tempered_model([sampler, ]model, beta)</code></pre><p>Return an instance representing a <code>model</code> tempered with <code>beta</code>.</p><p>The return-type depends on its usage in <a href="#MCMCTempering.compute_logdensities"><code>compute_logdensities</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/model.jl#L1-L7">source</a></section></article><p>This should be overloaded if you have some custom model-type that does not support the LogDensityProblems.jl-interface. In the case where the model <em>does</em> support the LogDensityProblems.jl-interface, then the following will automatically be constructed</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.TemperedLogDensityProblem" href="#MCMCTempering.TemperedLogDensityProblem"><code>MCMCTempering.TemperedLogDensityProblem</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TemperedLogDensityProblem</code></pre><p>A tempered log density function implementing the LogDensityProblem.jl interface.</p><p><strong>Fields</strong></p><ul><li><p><code>logdensity</code>: underlying log density; assumed to implement LogDensityProblems.jl interface</p></li><li><p><code>beta</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/logdensityproblems.jl#L1-L8">source</a></section></article><p>In addition, for computation of the tempered logdensities, we have</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.compute_logdensities" href="#MCMCTempering.compute_logdensities"><code>MCMCTempering.compute_logdensities</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_logdensities(model[, model_other], state, state_other)</code></pre><p>Return <code>(logdensity(model, state), logdensity(model, state_other))</code>.</p><p>The default implementation extracts the parameters from the transitions using <a href="#MCMCTempering.getparams"><code>MCMCTempering.getparams</code></a>.</p><p><code>model_other</code> can be provided to allow specializations that might be more efficient if we know that <code>state_other</code> is from <code>model_other</code>, e.g. in the case where the log-probability field is already present in <code>state</code> and <code>state_other</code>, and the only difference between <code>logdensity(model, state_other)</code> and <code>logdensity(model_other, state_other)</code> is an easily computable factor, then this can be exploited instead of re-computing the log-densities for both.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L99-L111">source</a></section></article><h2 id="Swapping"><a class="docs-heading-anchor" href="#Swapping">Swapping</a><a id="Swapping-1"></a><a class="docs-heading-anchor-permalink" href="#Swapping" title="Permalink"></a></h2><p>Swapping is implemented using the somewhat special <a href="#MCMCTempering.SwapSampler"><code>MCMCTempering.SwapSampler</code></a></p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.SwapSampler" href="#MCMCTempering.SwapSampler"><code>MCMCTempering.SwapSampler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SwapSampler &lt;: AbstractMCMC.AbstractSampler</code></pre><p><strong>Fields</strong></p><ul><li><code>strategy</code>: swap strategy to use</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapsampler.jl#L204-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.swapstrategy" href="#MCMCTempering.swapstrategy"><code>MCMCTempering.swapstrategy</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">swapstrategy(sampler::SwapSampler)</code></pre><p>Return the swap-strategy used by <code>sampler</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapsampler.jl#L217-L221">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This is a rather special sampler because, unlike most other implementations of <code>AbstractMCMC.AbstractSampler</code>, this is not a valid sampler <em>on its own</em>; for this to be sensible it needs to be part of composition (see <a href="#MCMCTempering.CompositionSampler"><code>MCMCTempering.CompositionSampler</code></a>) with <em>at least</em> one other type of (an actually valid) sampler.</p></div></div><h3 id="Different-swap-strategies"><a class="docs-heading-anchor" href="#Different-swap-strategies">Different swap-strategies</a><a id="Different-swap-strategies-1"></a><a class="docs-heading-anchor-permalink" href="#Different-swap-strategies" title="Permalink"></a></h3><p>A <a href="#MCMCTempering.SwapSampler"><code>MCMCTempering.SwapSampler</code></a> can be defined with different swapping strategies:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.AbstractSwapStrategy" href="#MCMCTempering.AbstractSwapStrategy"><code>MCMCTempering.AbstractSwapStrategy</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractSwapStrategy</code></pre><p>Represents a strategy for swapping between parallel chains.</p><p>A concrete subtype is expected to implement the method <a href="#MCMCTempering.swap_step"><code>swap_step</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.ReversibleSwap" href="#MCMCTempering.ReversibleSwap"><code>MCMCTempering.ReversibleSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ReversibleSwap &lt;: AbstractSwapStrategy</code></pre><p>Stochastically attempt either even- or odd-indexed swap moves between chains.</p><p>See <sup class="footnote-reference"><a id="citeref-SYED19" href="#footnote-SYED19">[SYED19]</a></sup> for more on this approach, referred to as SEO in their paper.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L10-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.NonReversibleSwap" href="#MCMCTempering.NonReversibleSwap"><code>MCMCTempering.NonReversibleSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NonReversibleSwap &lt;: AbstractSwapStrategy</code></pre><p>At every swap step taken, this strategy <em>deterministically</em> traverses first the odd chain indices, proposing swaps between neighbors, and then in the <em>next</em> swap step taken traverses even chain indices, proposing swaps between neighbors.</p><p>See <sup class="footnote-reference"><a id="citeref-SYED19" href="#footnote-SYED19">[SYED19]</a></sup> for more on this approach, referred to as DEO in their paper.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L21-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.SingleSwap" href="#MCMCTempering.SingleSwap"><code>MCMCTempering.SingleSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SingleSwap &lt;: AbstractSwapStrategy</code></pre><p>At every swap step taken, this strategy samples a single chain index <code>i</code> and proposes a swap between chains <code>i</code> and <code>i + 1</code>.</p><p>This approach goes under a number of names, e.g. Parallel Tempering (PT) MCMC and Replica-Exchange MCMC.<sup class="footnote-reference"><a id="citeref-PTPH05" href="#footnote-PTPH05">[PTPH05]</a></sup></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L35-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.SingleRandomSwap" href="#MCMCTempering.SingleRandomSwap"><code>MCMCTempering.SingleRandomSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SingleRandomSwap &lt;: AbstractSwapStrategy</code></pre><p>At every swap step taken, this strategy samples two chain indices <code>i</code> and &#39;j&#39; and proposes a swap between the two corresponding chains.</p><p>This approach is shown to be effective for certain models in <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L48-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.RandomSwap" href="#MCMCTempering.RandomSwap"><code>MCMCTempering.RandomSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RandomSwap &lt;: AbstractSwapStrategy</code></pre><p>This strategy randomly shuffles all the chain indices to produce <code>floor(numptemps(sampler)/2)</code> pairs of random (not necessarily neighbouring) chain indices to attempt to swap</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L60-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.NoSwap" href="#MCMCTempering.NoSwap"><code>MCMCTempering.NoSwap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NoSwap &lt;: AbstractSwapStrategy</code></pre><p>Mainly useful for debugging or observing each chain independently, this overrides and disables all swapping functionality.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapping.jl#L69-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.swap_step" href="#MCMCTempering.swap_step"><code>MCMCTempering.swap_step</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">swap_step([strategy::AbstractSwapStrategy, ]rng, model, sampler, state)</code></pre><p>Return a new <code>state</code>, with temperatures possibly swapped according to <code>strategy</code>.</p><p>If no <code>strategy</code> is provided, the return-value of <a href="#MCMCTempering.swapstrategy"><code>swapstrategy</code></a> called on <code>sampler</code> is used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/swapsampler.jl#L441-L448">source</a></section></article><h2 id="Other-samplers"><a class="docs-heading-anchor" href="#Other-samplers">Other samplers</a><a id="Other-samplers-1"></a><a class="docs-heading-anchor-permalink" href="#Other-samplers" title="Permalink"></a></h2><p>To make a sampler work with MCMCTempering.jl, the sampler needs to implement a few methods:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.getparams" href="#MCMCTempering.getparams"><code>MCMCTempering.getparams</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getparams([model, ]state)</code></pre><p>Get the parameters from the <code>state</code>.</p><p>Default implementation uses <a href="#MCMCTempering.getparams_and_logprob"><code>getparams_and_logprob</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.getlogprob" href="#MCMCTempering.getlogprob"><code>MCMCTempering.getlogprob</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getlogprob([model, ]state)</code></pre><p>Get the log probability of the <code>state</code>.</p><p>Default implementation uses <a href="#MCMCTempering.getparams_and_logprob"><code>getparams_and_logprob</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L16-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.getparams_and_logprob" href="#MCMCTempering.getparams_and_logprob"><code>MCMCTempering.getparams_and_logprob</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getparams_and_logprob([model, ]state)</code></pre><p>Return a vector of parameters from the <code>state</code>.</p><p>See also: <a href="#MCMCTempering.setparams_and_logprob!!"><code>setparams_and_logprob!!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L26-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.setparams_and_logprob!!" href="#MCMCTempering.setparams_and_logprob!!"><code>MCMCTempering.setparams_and_logprob!!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setparams_and_logprob!!([model, ]state, params)</code></pre><p>Set the parameters in the state to <code>params</code>, possibly mutating if it makes sense.</p><p>See also: <a href="#MCMCTempering.getparams_and_logprob"><code>getparams_and_logprob</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L35-L41">source</a></section></article><p>Other useful methods are:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.saveall" href="#MCMCTempering.saveall"><code>MCMCTempering.saveall</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">saveall(sampler)</code></pre><p>Return whether the sampler saves all the transitions or just the last one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/composition.jl#L28-L32">source</a></section></article><h3 id="Compositions-of-samplers"><a class="docs-heading-anchor" href="#Compositions-of-samplers">Compositions of samplers</a><a id="Compositions-of-samplers-1"></a><a class="docs-heading-anchor-permalink" href="#Compositions-of-samplers" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.CompositionSampler" href="#MCMCTempering.CompositionSampler"><code>MCMCTempering.CompositionSampler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CompositionSampler &lt;: AbstractMCMC.AbstractSampler</code></pre><p>A <code>CompositionSampler</code> is a container for a sequence of samplers.</p><p><strong>Fields</strong></p><ul><li><p><code>sampler_outer</code>: The outer sampler</p></li><li><p><code>sampler_inner</code>: The inner sampler</p></li><li><p><code>saveall</code>: Whether to save all the transitions or just the last one</p></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">composed_sampler = sampler_inner ∘ sampler_outer # or `CompositionSampler(sampler_inner, sampler_outer, Val(true))`
AbstractMCMC.step(rng, model, composed_sampler) # one step of `sampler_inner`, and one step of `sampler_outer`</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/composition.jl#L1-L14">source</a></section></article><p>This sampler also has its own transition- and state-type</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.CompositionTransition" href="#MCMCTempering.CompositionTransition"><code>MCMCTempering.CompositionTransition</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CompositionTransition</code></pre><p>Wrapper around the inner and outer transitions obtained from a <a href="#MCMCTempering.CompositionSampler"><code>CompositionSampler</code></a>.</p><p><strong>Fields</strong></p><ul><li><p><code>transition_outer</code>: The outer transition</p></li><li><p><code>transition_inner</code>: The inner transition</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/composition.jl#L61-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.CompositionState" href="#MCMCTempering.CompositionState"><code>MCMCTempering.CompositionState</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CompositionState</code></pre><p>Wrapper around the inner and outer states obtained from a <a href="#MCMCTempering.CompositionSampler"><code>CompositionSampler</code></a>.</p><p><strong>Fields</strong></p><ul><li><p><code>state_outer</code>: The outer state</p></li><li><p><code>state_inner</code>: The inner state</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/composition.jl#L36-L43">source</a></section></article><h4 id="Repeated-sampler-/-composition-with-itself"><a class="docs-heading-anchor" href="#Repeated-sampler-/-composition-with-itself">Repeated sampler / composition with itself</a><a id="Repeated-sampler-/-composition-with-itself-1"></a><a class="docs-heading-anchor-permalink" href="#Repeated-sampler-/-composition-with-itself" title="Permalink"></a></h4><p>Large compositions can have unfortunate effects on the compilation times in Julia.</p><p>To alleviate this issue we also have the <a href="#MCMCTempering.RepeatedSampler"><code>MCMCTempering.RepeatedSampler</code></a>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.RepeatedSampler" href="#MCMCTempering.RepeatedSampler"><code>MCMCTempering.RepeatedSampler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RepeatedSampler &lt;: AbstractMCMC.AbstractSampler</code></pre><p>A <code>RepeatedSampler</code> is a container for a sampler and a number of times to repeat it.</p><p><strong>Fields</strong></p><ul><li><p><code>sampler</code>: The sampler to repeat</p></li><li><p><code>num_repeat</code>: The number of times to repeat the sampler</p></li><li><p><code>saveall</code>: Whether to save all the transitions or just the last one</p></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">repeated_sampler = sampler^10 # or `RepeatedSampler(sampler, 10, Val(true))`
AbstractMCMC.step(rng, model, repeated_sampler) # take 10 steps of `sampler`</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/repeated.jl#L1-L14">source</a></section></article><p>In the case where <a href="#MCMCTempering.saveall"><code>MCMCTempering.saveall</code></a> returns <code>false</code>, <code>step</code> for a <a href="#MCMCTempering.RepeatedSampler"><code>MCMCTempering.RepeatedSampler</code></a> simply returns the last transition and state; if it returns <code>true</code>, then the transition is of type <a href="#MCMCTempering.SequentialTransitions"><code>MCMCTempering.SequentialTransitions</code></a> and the state is of type <a href="#MCMCTempering.SequentialStates"><code>MCMCTempering.SequentialStates</code></a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.SequentialTransitions" href="#MCMCTempering.SequentialTransitions"><code>MCMCTempering.SequentialTransitions</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SequentialTransitions</code></pre><p>A <code>SequentialTransitions</code> object is a container for a sequence of transitions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.SequentialStates" href="#MCMCTempering.SequentialStates"><code>MCMCTempering.SequentialStates</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SequentialStates</code></pre><p>A <code>SequentialStates</code> object is a container for a sequence of states.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/abstractmcmc.jl#L82-L86">source</a></section></article><p>This effectively allows you to specify whether or not the &quot;intermediate&quot; states should be kept or not.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You will rarely see <a href="#MCMCTempering.SequentialTransitions"><code>MCMCTempering.SequentialTransitions</code></a> and <a href="#MCMCTempering.SequentialStates"><code>MCMCTempering.SequentialStates</code></a> as a user because <code>AbstractMCMC.bundle_samples</code> has been overloaded to these to return the flattened representation, i.e. we &quot;un-roll&quot; the transitions in every <a href="#MCMCTempering.SequentialTransitions"><code>MCMCTempering.SequentialTransitions</code></a>.</p></div></div><h3 id="Multiple-or-product-of-samplers"><a class="docs-heading-anchor" href="#Multiple-or-product-of-samplers">Multiple or product of samplers</a><a id="Multiple-or-product-of-samplers-1"></a><a class="docs-heading-anchor-permalink" href="#Multiple-or-product-of-samplers" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.MultiSampler" href="#MCMCTempering.MultiSampler"><code>MCMCTempering.MultiSampler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MultiSampler &lt;: AbstractMCMC.AbstractSampler</code></pre><p>A <code>MultiSampler</code> is a container for multiple samplers.</p><p>See also: <a href="#MCMCTempering.MultiModel"><code>MultiModel</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>samplers</code>: The samplers</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># `sampler1` targets `model1`, `sampler2` targets `model2`, etc.
multi_model = model1 × model2 × model3 # or `MultiModel((model1, model2, model3))`
multi_sampler = sampler1 × sampler2 × sampler3 # or `MultiSampler((sampler1, sampler2, sampler3))`
# Target the joint model.
AbstractMCMC.step(rng, multi_model, multi_sampler)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/multi.jl#L11-L29">source</a></section></article><p>where the tempered models are represented using a <a href="#MCMCTempering.MultiModel"><code>MCMCTempering.MultiModel</code></a></p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.MultiModel" href="#MCMCTempering.MultiModel"><code>MCMCTempering.MultiModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MultiModel &lt;: AbstractMCMC.AbstractModel</code></pre><p>A <code>MultiModel</code> is a container for multiple models.</p><p>See also: <a href="#MCMCTempering.MultiSampler"><code>MultiSampler</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>models</code>: The models</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/multi.jl#L40-L49">source</a></section></article><p>The <code>step</code> for a <a href="#MCMCTempering.MultiSampler"><code>MCMCTempering.MultiSampler</code></a> and a [<code>MCMCTempering.MultiModel</code>] is a transition of type <a href="#MCMCTempering.MultipleTransitions"><code>MCMCTempering.MultipleTransitions</code></a> and a state of type <a href="#MCMCTempering.MultipleStates"><code>MCMCTempering.MultipleStates</code></a></p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.MultipleTransitions" href="#MCMCTempering.MultipleTransitions"><code>MCMCTempering.MultipleTransitions</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MultipleTransitions</code></pre><p>A container for multiple transitions.</p><p>See also: <a href="#MCMCTempering.MultipleStates"><code>MultipleStates</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>transitions</code>: The transitions</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/multi.jl#L63-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMCTempering.MultipleStates" href="#MCMCTempering.MultipleStates"><code>MCMCTempering.MultipleStates</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MultipleStates</code></pre><p>A container for multiple states.</p><p>See also: <a href="#MCMCTempering.MultipleTransitions"><code>MultipleTransitions</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>states</code>: The states</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/MCMCTempering.jl/blob/deb96684496f3fbd011b9f70f28c49a161def23f/src/samplers/multi.jl#L87-L96">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-SYED19"><a class="tag is-link" href="#citeref-SYED19">SYED19</a>Syed, S., Bouchard-Côté, Alexandre, Deligiannidis, G., &amp; Doucet, A., Non-reversible Parallel Tempering: A Scalable Highly Parallel MCMC Scheme, arXiv:1905.02939,  (2019).</li><li class="footnote" id="footnote-SYED19"><a class="tag is-link" href="#citeref-SYED19">SYED19</a>Syed, S., Bouchard-Côté, Alexandre, Deligiannidis, G., &amp; Doucet, A., Non-reversible Parallel Tempering: A Scalable Highly Parallel MCMC Scheme, arXiv:1905.02939,  (2019).</li><li class="footnote" id="footnote-PTPH05"><a class="tag is-link" href="#citeref-PTPH05">PTPH05</a>Earl, D. J., &amp; Deem, M. W., Parallel tempering: theory, applications, and new perspectives, Physical Chemistry Chemical Physics, 7(23), 3910–3916 (2005).</li><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Malcolm Sambridge, A Parallel Tempering algorithm for probabilistic sampling and multimodal optimization, Geophysical Journal International, Volume 196, Issue 1, January 2014, Pages 357–374, https://doi.org/10.1093/gji/ggt342</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../getting-started/">« Getting started: a simple Mixture of Gaussians example</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 8 October 2024 08:05">Tuesday 8 October 2024</span>. Using Julia version 1.11.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
